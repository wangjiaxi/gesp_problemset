# 搜索页面功能说明

## 🔍 功能特性

### 1. 实时搜索
- **输入防抖**：每输入一个字符后间隔0.2秒自动搜索
- **即时反馈**：输入过程中实时显示搜索结果
- **性能优化**：使用防抖技术避免频繁搜索

### 2. 搜索历史
- **自动记录**：只有点击搜索按钮才会记录到历史
- **去重处理**：相同关键词不会重复记录
- **数量限制**：最多保存10条历史记录
- **本地存储**：历史记录保存在本地，下次打开仍可查看
- **快速搜索**：点击历史记录可快速重新搜索
- **删除功能**：支持删除单条历史记录或清空全部

### 3. 热门搜索
- **预设关键词**：提供常用的编程相关搜索词
- **快速入口**：点击热门搜索词可直接搜索
- **动态更新**：可根据用户搜索频率动态调整

### 4. 智能搜索
- **多字段搜索**：支持搜索题目、代码、解析、标签等内容
- **相关性排序**：按匹配度和相关性对结果排序
- **搜索统计**：显示搜索结果的分类统计信息

## 📱 页面结构

### 搜索栏
- 搜索输入框
- 清空按钮
- 搜索按钮

### 搜索历史区域
- 历史记录列表
- 清空历史按钮
- 删除单条记录

### 热门搜索区域
- 热门关键词标签
- 点击快速搜索

### 搜索结果区域
- 结果统计信息
- 题目列表
- 无结果提示

## 🔧 技术实现

### 防抖搜索
```javascript
// 0.2秒防抖
const timer = setTimeout(() => {
  this.performSearch(value, false); // 实时搜索不记录历史
}, 200);
```

### 历史记录管理
```javascript
// 只有点击搜索按钮才记录历史
onSearchTap: function() {
  this.performSearch(keyword, true); // saveHistory = true
}

// 实时搜索不记录历史
onSearchInput: function(e) {
  this.performSearch(value, false); // saveHistory = false
}
```

### 搜索算法
- **多字段匹配**：题目内容、代码、解析、标签、选项
- **相关性评分**：不同字段匹配给予不同权重
- **结果排序**：按评分和难度排序

### 数据存储
- 使用微信小程序本地存储API
- 搜索历史存储在 `searchHistory` 键下
- 支持数据持久化

## 🎯 用户体验

### 搜索流程
1. **进入搜索页**：从首页点击搜索框进入
2. **查看历史/热门**：可快速选择之前搜索过的内容
3. **输入关键词**：实时显示搜索结果
4. **点击搜索**：记录到搜索历史
5. **查看结果**：浏览搜索结果并点击查看详情

### 交互设计
- **即时反馈**：输入即搜索，无需等待
- **清晰导航**：明确的搜索状态和结果展示
- **便捷操作**：一键清空、快速删除
- **智能提示**：搜索建议和热门推荐

## 📊 搜索统计

### 结果统计
- 总题目数量
- 按题型分类统计
- 按等级分类统计
- 按难度分类统计

### 搜索分析
- 搜索关键词验证
- 搜索结果相关性分析
- 用户搜索行为统计

## 🔄 数据流

### 搜索数据流
1. 用户输入 → 防抖处理 → 执行搜索
2. 获取所有题目 → 关键词匹配 → 相关性排序
3. 返回结果 → 统计分析 → 页面展示

### 历史数据流
1. 点击搜索 → 格式化历史 → 本地存储
2. 页面加载 → 读取存储 → 展示历史
3. 删除操作 → 更新存储 → 刷新页面

## 🚀 性能优化

### 搜索优化
- **防抖技术**：减少不必要的搜索请求
- **结果缓存**：相同关键词复用结果
- **分页加载**：大量结果分页展示

### 存储优化
- **数据压缩**：历史记录去重和限量
- **异步操作**：非阻塞的存储操作
- **错误处理**：存储失败的降级处理

## 🎨 样式特点

### 视觉设计
- **简洁界面**：清晰的信息层次
- **一致性**：与整体应用风格统一
- **响应式**：适配不同屏幕尺寸

### 交互反馈
- **加载状态**：搜索过程中的loading动画
- **空状态**：无结果时的友好提示
- **操作反馈**：按钮点击和状态变化

## 📝 使用示例

### 基本搜索
```javascript
// 跳转到搜索页面
wx.navigateTo({
  url: '/pages/search/search'
});

// 带关键词跳转
wx.navigateTo({
  url: '/pages/search/search?keyword=Python'
});
```

### 搜索工具函数
```javascript
const searchUtils = require('../../utils/searchUtils.js');

// 搜索题目
const results = searchUtils.searchQuestions(allQuestions, keyword);

// 排序结果
const sortedResults = searchUtils.sortByRelevance(results, keyword);

// 格式化历史
const newHistory = searchUtils.formatSearchHistory(history, keyword);
```

## 🔮 未来扩展

### 功能扩展
- **搜索建议**：输入时显示搜索建议
- **语音搜索**：支持语音输入搜索
- **图片搜索**：支持拍照搜索题目
- **高级筛选**：按等级、类型、难度筛选

### 数据扩展
- **云端同步**：搜索历史云端同步
- **个性化推荐**：基于搜索历史推荐
- **搜索分析**：用户搜索行为分析
- **热门更新**：动态更新热门搜索词